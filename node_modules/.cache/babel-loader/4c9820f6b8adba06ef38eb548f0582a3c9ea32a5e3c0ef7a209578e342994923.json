{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'./AppointmentScheduler.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AppointmentScheduler(){const[services,setServices]=useState([]);const[selectedService,setSelectedService]=useState('');const[date,setDate]=useState('');const[availableSlots,setAvailableSlots]=useState([]);const[selectedSlot,setSelectedSlot]=useState('');const[successMessage,setSuccessMessage]=useState('');const navigate=useNavigate();useEffect(()=>{axios.get('http://localhost:5000/services').then(res=>{setServices(res.data);}).catch(err=>{console.error('Error fetching services:',err);});},[]);const handleCheckAvailability=()=>{if(!selectedService||!date)return;axios.get(\"http://localhost:5000/availability?provider_id=1&service_id=\".concat(selectedService,\"&date=\").concat(date)).then(res=>{setAvailableSlots(res.data);}).catch(err=>{console.error('Error checking availability:',err);});};const handleBookAppointment=()=>{const token=localStorage.getItem('token');if(!token){alert('Please login first!');return;}axios.post('http://localhost:5000/bookings',{provider_id:1,service_id:selectedService,date:date,time:selectedSlot},{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>{console.log('Booking success:',res.data);setSuccessMessage('Appointment booked successfully!');setTimeout(()=>{navigate('/bookings-home');},2000);}).catch(err=>{console.error('Booking error:',err);if(err.response&&err.response.data&&err.response.data.error){alert(\"Failed: \".concat(err.response.data.error));}else{alert('Failed to book appointment');}});};return/*#__PURE__*/_jsxs(\"div\",{className:\"appointment-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"appointment-title\",children:\"Book an Appointment\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Service:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",value:selectedService,onChange:e=>setSelectedService(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Service --\"}),services.map(service=>/*#__PURE__*/_jsxs(\"option\",{value:service.id,children:[service.name,\" (\",service.duration,\" min) - \",service.price,\" AED\"]},service.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-input\",value:date,onChange:e=>setDate(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-check\",onClick:handleCheckAvailability,children:\"Check Availability\"}),availableSlots.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",children:\"Available Time Slots:\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-input\",value:selectedSlot,onChange:e=>setSelectedSlot(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Time --\"}),availableSlots.map((slot,index)=>/*#__PURE__*/_jsx(\"option\",{value:slot,children:slot},index))]})]}),selectedSlot&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-book\",onClick:handleBookAppointment,children:\"Book Now\"}),successMessage&&/*#__PURE__*/_jsx(\"p\",{className:\"success-message\",children:successMessage})]});}export default AppointmentScheduler;","map":{"version":3,"names":["React","useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","AppointmentScheduler","services","setServices","selectedService","setSelectedService","date","setDate","availableSlots","setAvailableSlots","selectedSlot","setSelectedSlot","successMessage","setSuccessMessage","navigate","get","then","res","data","catch","err","console","error","handleCheckAvailability","concat","handleBookAppointment","token","localStorage","getItem","alert","post","provider_id","service_id","time","headers","Authorization","log","setTimeout","response","className","children","value","onChange","e","target","map","service","id","name","duration","price","type","required","onClick","length","slot","index"],"sources":["C:/project/Booking/client/src/pages/AppointmentScheduler.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport './AppointmentScheduler.css';\r\n\r\nfunction AppointmentScheduler() {\r\n  const [services, setServices] = useState([]);\r\n  const [selectedService, setSelectedService] = useState('');\r\n  const [date, setDate] = useState('');\r\n  const [availableSlots, setAvailableSlots] = useState([]);\r\n  const [selectedSlot, setSelectedSlot] = useState('');\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get('http://localhost:5000/services')\r\n      .then((res) => {\r\n        setServices(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error fetching services:', err);\r\n      });\r\n  }, []);\r\n\r\n  const handleCheckAvailability = () => {\r\n    if (!selectedService || !date) return;\r\n\r\n    axios\r\n      .get(\r\n        `http://localhost:5000/availability?provider_id=1&service_id=${selectedService}&date=${date}`\r\n      )\r\n      .then((res) => {\r\n        setAvailableSlots(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.error('Error checking availability:', err);\r\n      });\r\n  };\r\n\r\n  const handleBookAppointment = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      alert('Please login first!');\r\n      return;\r\n    }\r\n\r\n    axios\r\n      .post(\r\n        'http://localhost:5000/bookings',\r\n        {\r\n          provider_id: 1,\r\n          service_id: selectedService,\r\n          date: date,\r\n          time: selectedSlot\r\n        },\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`\r\n          }\r\n        }\r\n      )\r\n      .then((res) => {\r\n        console.log('Booking success:', res.data);\r\n        setSuccessMessage('Appointment booked successfully!');\r\n        setTimeout(() => {\r\n          navigate('/bookings-home');\r\n        }, 2000);\r\n      })\r\n      .catch((err) => {\r\n        console.error('Booking error:', err);\r\n        if (err.response && err.response.data && err.response.data.error) {\r\n          alert(`Failed: ${err.response.data.error}`);\r\n        } else {\r\n          alert('Failed to book appointment');\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <div className=\"appointment-container\">\r\n      <h1 className=\"appointment-title\">Book an Appointment</h1>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Service:</label>\r\n        <select\r\n          className=\"form-input\"\r\n          value={selectedService}\r\n          onChange={(e) => setSelectedService(e.target.value)}\r\n        >\r\n          <option value=\"\">-- Select Service --</option>\r\n          {services.map((service) => (\r\n            <option key={service.id} value={service.id}>\r\n              {service.name} ({service.duration} min) - {service.price} AED\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"form-label\">Date:</label>\r\n        <input\r\n          type=\"date\"\r\n          className=\"form-input\"\r\n          value={date}\r\n          onChange={(e) => setDate(e.target.value)}\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <button className=\"btn btn-check\" onClick={handleCheckAvailability}>\r\n        Check Availability\r\n      </button>\r\n\r\n      {availableSlots.length > 0 && (\r\n        <div className=\"form-group\">\r\n          <label className=\"form-label\">Available Time Slots:</label>\r\n          <select\r\n            className=\"form-input\"\r\n            value={selectedSlot}\r\n            onChange={(e) => setSelectedSlot(e.target.value)}\r\n          >\r\n            <option value=\"\">-- Select Time --</option>\r\n            {availableSlots.map((slot, index) => (\r\n              <option key={index} value={slot}>\r\n                {slot}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      )}\r\n\r\n      {selectedSlot && (\r\n        <button className=\"btn btn-book\" onClick={handleBookAppointment}>\r\n          Book Now\r\n        </button>\r\n      )}\r\n\r\n      {successMessage && <p className=\"success-message\">{successMessage}</p>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppointmentScheduler;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}